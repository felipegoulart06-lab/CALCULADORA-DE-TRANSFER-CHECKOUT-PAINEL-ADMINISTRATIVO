<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Teste de Embed — Luxury Drive</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; padding: 20px; background: #f5f5f5; }
    .card { background: #fff; border: 1px solid #ddd; border-radius: 8px; padding: 16px; max-width: 900px; margin: 0 auto; }
    label { display: block; font-size: 12px; color: #444; margin-bottom: 6px; }
    input { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 6px; }
    .row { display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 10px; margin-bottom: 12px; }
    button { background: #000; color: #fff; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; }
    button:disabled { opacity: .6; }
    iframe { width: 100%; height: 900px; border: 1px solid #ddd; border-radius: 8px; }
  </style>
</head>
<body>
  <div class="card">
    <h1 style="margin:0 0 12px;">Teste de Embed (iframe)</h1>
    <p style="margin:0 0 12px; font-size:13px; color:#555">Esta página estática permite validar o formulário de checkout dentro de um iframe como se estivesse em um site externo.</p>
    <div class="row">
      <div>
        <label>URL base do app</label>
        <input id="baseUrl" value="http://localhost:8081" />
      </div>
      <div>
        <label>VehicleId (opcional)</label>
        <input id="vehicleId" placeholder="ex: admin-1 ou 1" />
      </div>
      <div style="display:flex; align-items:end;">
        <button id="loadBtn">Carregar iframe</button>
      </div>
    </div>
    <iframe id="iframe" src="http://localhost:8081/checkout?embed=1" allow="clipboard-write;" referrerpolicy="no-referrer"></iframe>
  </div>
  <script>
    const baseUrlEl = document.getElementById('baseUrl');
    const vehicleIdEl = document.getElementById('vehicleId');
    const iframeEl = document.getElementById('iframe');
    document.getElementById('loadBtn').addEventListener('click', () => {
      const base = (baseUrlEl.value || '').replace(/\/$/, '');
      const id = vehicleIdEl.value || '';
      const url = new URL(base + '/checkout');
      url.searchParams.set('embed', '1');
      if (id) url.searchParams.set('vehicleId', id);
      iframeEl.src = url.toString();
    });
  </script>
</body>
</html>